<!DOCTYPE html>
<html>
<head>
    <title>Clothing Store Management</title>
    <style>
        body { font-family: Arial; padding: 20px; background: #f4f4f4; }
        h1 { color: #333; }
        input, select, button { margin: 5px; padding: 8px; }
        .item { margin-bottom: 10px; padding: 10px; background: #fff; border: 1px solid #ccc; }
        .section { margin-bottom: 30px; }
    </style>
</head>
<body>

    <h1>Clothing Store Management</h1>

    <div class="section">
        <h3>Add New Item</h3>
        <input type="text" id="name" placeholder="Clothing Name" />
        <input type="text" id="size" placeholder="Size (S, M, L...)" />
        <input type="text" id="color" placeholder="Color" />
        <input type="number" id="price" placeholder="Price" />
        <input type="number" id="quantity" placeholder="Quantity" />
        <button onclick="addItem()">Add Item</button>
    </div>

    <div class="section">
        <h3>Search Item</h3>
        <input type="text" id="searchKeyword" placeholder="Enter name or size" />
        <button onclick="searchItem()">Search</button>
        <div id="searchResults"></div>
    </div>

    <div class="section">
        <h3>Sell Item</h3>
        <input type="text" id="sellName" placeholder="Item name" />
        <input type="number" id="sellQty" placeholder="Quantity" />
        <button onclick="sellItem()">Sell</button>
    </div>

    <div class="section">
        <h3>Stock</h3>
        <button onclick="viewStock()">Refresh Stock</button>
        <div id="stockList"></div>
    </div>

    <script>
        let data = JSON.parse(localStorage.getItem("storeData")) || [];

        function saveData() {
            localStorage.setItem("storeData", JSON.stringify(data));
        }

        function addItem() {
            const name = document.getElementById("name").value;
            const size = document.getElementById("size").value;
            const color = document.getElementById("color").value;
            const price = parseFloat(document.getElementById("price").value);
            const quantity = parseInt(document.getElementById("quantity").value);

            if (!name || !size || !color || isNaN(price) || isNaN(quantity)) {
                alert("Please fill all fields correctly.");
                return;
            }

            data.push({ name, size, color, price, quantity });
            saveData();
            alert("Item added!");
            viewStock();
        }

        function viewStock() {
            const stockDiv = document.getElementById("stockList");
            stockDiv.innerHTML = "";

            if (data.length === 0) {
                stockDiv.innerHTML = "No stock available.";
                return;
            }

            data.forEach((item, index) => {
                const div = document.createElement("div");
                div.className = "item";
                div.innerText = `${index + 1}. ${item.name} | Size: ${item.size} | Color: ${item.color} | Price: ₹${item.price} | Qty: ${item.quantity}`;
                stockDiv.appendChild(div);
            });
        }

        function searchItem() {
            const keyword = document.getElementById("searchKeyword").value.toLowerCase();
            const resultDiv = document.getElementById("searchResults");
            resultDiv.innerHTML = "";

            const results = data.filter(item =>
                item.name.toLowerCase().includes(keyword) || item.size.toLowerCase().includes(keyword)
            );

            if (results.length === 0) {
                resultDiv.innerHTML = "No matching items found.";
                return;
            }

            results.forEach(item => {
                const div = document.createElement("div");
                div.className = "item";
                div.innerText = `${item.name} | Size: ${item.size} | Color: ${item.color} | Price: ₹${item.price} | Qty: ${item.quantity}`;
                resultDiv.appendChild(div);
            });
        }

        function sellItem() {
            const name = document.getElementById("sellName").value.toLowerCase();
            const qty = parseInt(document.getElementById("sellQty").value);

            const item = data.find(i => i.name.toLowerCase() === name);

            if (!item) {
                alert("Item not found.");
                return;
            }

            if (qty > item.quantity) {
                alert("Not enough stock.");
                return;
            }

            item.quantity -= qty;
            saveData();

            const total = qty * item.price;
            alert(`Sold ${qty} ${item.name}(s). Total: ₹${total}`);
            viewStock();
        }

        // Load stock on page load
        window.onload = viewStock;
    </script>

</body>
</html>
